# KPI管理API（目標指数管理API）

---

## はじめに
目標を立てても、「今どこまで進んでいるのか」が曖昧なままになってしまうことは少なくありません。
最終目標（KGI）だけを掲げても、日々の行動や数値と結びつかなければ、成長は可視化されません。

本APIは、KGI（最終目標）とKPI（中間指標）、そして日々の進捗記録を構造的に管理するために開発しました。
UIを持たないバックエンドAPIとして設計し、他アプリへ組み込み可能な形で提供することを想定しています。

目標を「感覚」ではなく「数値」で管理するための基盤となるAPIです。

---

## コンセプト
「目標を構造化し、進捗を数値で可視化する。」

KGI → KPI → 記録という階層構造を明確に設計し、
単なるデータ保存ではなく、“成長を管理するためのAPI”を目指しました。

初期MVPでは以下に集中しました。

- エンティティ設計
- REST API設計
- リレーション管理
- CRUD操作の安定実装
  
現在ではそれに加えて、

- DTOによるAPI契約の明確化
- 進捗率の動的算出ロジック実装
- API仕様の明文化（Swagger対応前提）

まで実装を完了しています。

---

## 概要
本APIは、目標管理のためのREST APIです。  
1. ユーザーを作成
2. ユーザーごとにKGIを登録
3. KGIに紐づくKPIを登録
4. KPIごとに日付単位で進捗を記録

という流れでデータを管理します。

現在は以下の設計方針を採用しています。

- 進捗率はDBに保存しない（動的算出）
- Entityは外部公開しない（DTO分離）
- RESTful設計に準拠したエンドポイント設計

認証機能は未実装ですが、JWT導入を前提とした拡張可能な構造になっています。

---

## 主な機能
- ユーザー作成・取得
- KGI作成・取得・更新・削除
- KPI作成・取得・更新・削除
- KPI進捗記録の作成・取得・削除
- KPI進捗率の動的算出
- KGI進捗率の集約算出（KPI平均）
- DTOによるRequest / Response分離
- RESTful設計に基づくエンドポイント実装
- Postmanによる動作確認

---

## データ構造
本プロジェクトは、以下の階層構造でデータを管理しています。

```text
AppUser (ユーザー)
 　　  └── KGI (最終目標)
        　　　└── KPI (中間指標)
             　　　　└── KPIRecord (進捗履歴)
```

---

## データベース設計
各テーブルは、上位のリソースと親子関係を持ちます。
| テーブル名 | 役割 | 説明 |
|-----------|------|------|
| **app_users** | データ所有者 | アプリケーションの利用者情報を保持 |
| **kgi** | 最終目標 | 達成すべき最上位の目標 |
| **kpi** | 測定指標 | KGI達成のために計測する具体的な数値 |
| **kpi_record** | 進捗履歴 | 日々の実績値を記録するデータ |

---

## 使用技術
- **バックエンド**：Java / Spring Boot
- **ORM**：Spring Data JPA
- **データベース**：MySQL
- **ビルドツール**：Maven
- **開発環境**：IntelliJ IDEA
- **APIテスト**：Postman
- **API仕様管理**：  Swagger（OpenAPI想定）

---

## 起動方法
1. リポジトリをクローンする
   ```bash
   git clone [https://github.com/Ritsuki-Irabu/kpi-api.git](https://github.com/Ritsuki-Irabu/kpi-api.git)
2. IntelliJ IDEAでプロジェクトを開く
   
3. application.yml（またはproperties）のDB設定確認
   
4. Spring Bootアプリを実行する
  
5. Postman等で http://localhost:8080 にアクセス

---

## 実装予定機能（拡張案）
※以下は未実装の拡張項目です。
- 例外処理の統一（GlobalExceptionHandler）
- 認証・認可（Spring Security / JWT）
- バリデーション強化
- 月別集計API
- ステータス自動判定（ACHIEVED / FAILED等）
- 組織管理機能
- 分析・予測ロジック

---

## おわりに
本APIは、UIを持たないバックエンド専用アプリとして設計しました。
目標管理を構造化し、拡張可能な設計を意識しています。

MVP段階は完了し、現在は「実務品質への拡張フェーズ」に入っています。
今後は認証機能や例外設計を追加し、より堅牢で再利用性の高いAPIへ発展させていきます。

改善提案やフィードバックがあれば、ぜひ issue や pull request をお願いします。
